<div class="container text-center px-0"> <!-- *ngIf="!(menuService.menuOpened$ | async)" -->
  <div class="card">
    <div class="card-title d-flex flex-column justify-content-center align-items-center">
      <h5 class="pt-2">
        Clienti
      </h5>
      <div class="d-flex flex-column w-100 justify-content-center align-items-center">
        <div class="input-box d-flex w-75 max-width-300px">
          <input class="form-control" type="text" #searchString placeholder="cauta.." (keyup)="searchInput($event, searchString.value)">
          <button class="btn" (click)="searchClients(searchString.value)">
            <i class="fa fa-search"></i>
          </button>
        </div>
        <div>
          <button class="btn" data-bs-toggle="modal" data-bs-target="#filterModal">
            <i class="fa-solid fa-filter"></i>
            <span> Fara Filtre </span>
          </button>
        </div>
      </div>
    </div>
    <p *ngIf="clients$"> ({{(clients$ | async)?.length}} rezultate) </p>
    <div>
      <div class="card-table">
        <div class="cart-product table-responsive">
          <table class="table table-striped table-hover table-bordered align-middle table-sm">
            <tr *ngFor="let client of clients$ | async; let i=index">
              <table class="table table-striped table-hover table-bordered align-middle table-sm">
                <tbody class="table-group-divider">
                  <tr>
                    <th class="text-end width-80px"> Nr. </th>
                    <td class="text-start">
                      {{ i+1 }}
                      <button class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#editModal" (click)="saveIdToChangeAfterConfirmation(client)">
                        <i class="fa-solid fa-pencil"></i>
                      </button>
                    </td>
                  </tr>
                  <tr>
                    <th class="text-end width-80px"> Nume </th>
                    <td class="text-start"> {{ client.Nume }} </td>
                  </tr>
                  <tr>
                    <th class="text-end width-80px"> Detalii </th>
                    <td class="text-start"> {{ client.Detalii }} </td>
                  </tr>
                  <tr>
                    <th class="text-end width-80px"> Follow Up </th>
                    <td class="text-start"> {{ client.FollowUp }} </td>
                  </tr>
                  <tr>
                    <th class="text-end width-80px"> Invite </th>
                    <td class="text-start"> {{ client.Invite }} </td>
                  </tr>
                  <tr>
                    <th class="text-end width-80px"> Cunosc </th>
                    <td class="text-start"> {{ client.Cunosc }} </td>
                  </tr>
                  <tr>
                    <th class="text-end width-80px"> Locatie </th>
                    <td class="text-start"> {{ client.Locatie }} </td>
                  </tr>
                  <tr>
                    <th class="text-end width-80px"> Abordare </th>
                    <td class="text-start"> {{ client.Abordare }} </td>
                  </tr>
                  <tr>
                    <th class="text-end width-80px"> Next Step </th>
                    <td class="text-start"> {{ client.NextStep }} </td>
                  </tr>
                  <tr>
                    <th class="text-end width-80px"> Kids </th>
                    <td class="text-start"> {{ client.Kids }} </td>
                  </tr>
                  <tr>
                    <th class="text-end width-80px"> Connected </th>
                    <td class="text-start"> {{ client.Id | slice : 0 : 4 }} </td>
                  </tr>
                </tbody>
              </table>
            </tr>
          </table>
        </div>
        <button class="btn bottom-right" [ngClass]="{ 'show-scrollTop': windowScrolled }" (click)="scrollToTop()" title="Go to top">
          <i class="fa-2x fa-regular fa-circle-up"></i>
        </button>
      </div>
    </div>
  </div>
</div>
<!-- Modal and Form for editing -->
<div class="modal fade" id="editModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
  <div class="modal-dialog modal-dialog-centered">
    <div class="modal-content">
      <div class="modal-header">
        <h1 class="modal-title fs-5"> </h1>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>
      <div class="modal-body">
        <form 
          (ngSubmit)="submitEditForm()"
          [formGroup]="editForm">
          <table class="table table-striped table-hover align-middle table-sm">
            <tbody>
              <tr>
                <th class="text-end width-80px"> Nume </th>
                <td> {{ itemToChangeAfterConfirmation.Nume }} </td>
              </tr>
              <tr>
                <th class="text-end width-80px"> Detalii </th>
                <td>
                  <textarea class="form-control" formControlName="Detalii"></textarea>
                </td>
              </tr>
              <tr>
                <th class="text-end width-80px"> Follow Up </th>
                <td>
                  <textarea class="form-control" formControlName="FollowUp"></textarea>
                </td>
              </tr>
              <tr>
                <th class="text-end width-80px"> Invite </th>
                <td>
                  <textarea class="form-control" formControlName="Invite"></textarea>
                </td>
              </tr>
              <tr>
                <th class="text-end width-80px"> Cunosc </th>
                <td>
                  <textarea class="form-control" formControlName="Cunosc"></textarea>
                </td>
              </tr>
              <tr>
                <th class="text-end width-80px"> Locatie </th>
                <td>
                  <textarea class="form-control" formControlName="Locatie"></textarea>
                </td>
              </tr>
              <tr>
                <th class="text-end width-80px"> Abordare </th>
                <td>
                  <textarea class="form-control" formControlName="Abordare"></textarea>
                </td>
              </tr>
              <tr>
                <th class="text-end width-80px"> Next Step </th>
                <td>
                  <textarea class="form-control" formControlName="NextStep"></textarea>
                </td>
              </tr>
              <tr>
                <th class="text-end width-80px"> Kids </th>
                <td>
                  <textarea class="form-control" formControlName="Kids"></textarea>
                </td>
              </tr>
              <tr>
                <th class="text-end width-80px"> Connected </th>
                <td> {{ itemToChangeAfterConfirmation.Id | slice : 0 : 4 }} </td>
              </tr>
            </tbody>
          </table>
          <div class="modal-footer border-top-0">
            <button type="submit" class="btn btn-primary" data-bs-dismiss="modal"> Save </button>
            <button type="button" class="btn btn-secondary" data-bs-dismiss="modal"> Cancel </button>
          </div>
        </form>
      </div>
    </div>
  </div>
</div>
<!-- Modal and Form for filters -->
<div class="modal fade" id="filterModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true"> <!-- (click)="getFilters()" -->
  <div class="modal-dialog modal-dialog-centered">
    <div class="modal-content">
      <div class="modal-header">
        <h1 class="modal-title fs-5"> </h1>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>
      <div class="modal-body">
        <h3 class="text-center"> Filtreaza rezultatele </h3>
        <form 
          (ngSubmit)="submitFilterForm()"
          [formGroup]="filterForm">
          <!-- List with all letters for filtering -->
          <!-- <p class="fs-5 text-center"> Doar clientii care incep cu litera: </p>
          <div class="row row-cols-6">
            <div *ngFor="let letter of lettersArray; let i=index" class="form-check form-check-inline col">
              <input class="form-check-input" type="checkbox" id="inlineCheckbox{{i+1}}" formControlName="letter{{letter == '#' ? 'Rest' : letter }}" value="option{{i+1}}">
              <label class="form-check-label" for="inlineCheckbox{{i+1}}"> {{letter}} </label>
            </div>
          </div> -->
          <!-- Select month for filtering -->
          <div class="d-flex justify-content-center p-2">
            <!-- <button type="button" class="btn" (click)="year.innerHTML = (+year.innerHTML - 1).toString()"> -->
            <button type="button" class="btn" (click)="changeFilterYear(-1)">
              <i class="fa-sharp fa-solid fa-circle-left"></i>
            </button>
            <!-- <button #year [innerHTML]="filterDate | date: 'y'" class="btn btn-success"></button> -->
            <input class="btn active" formControlName="filterDateYear" type="text">
            <!-- <button type="button" class="btn" (click)="year.innerHTML = (+year.innerHTML + 1).toString()"> -->
            <button type="button" class="btn">
              <i class="fa-sharp fa-solid fa-circle-right"></i>
            </button>
          </div>
          <div class="container text-center">
            <div class="row row-cols-3">
              <button type="button" class="btn btn-light" (click)="changeFilterMonth(1)"> Ianuarie </button>
              <button type="button" class="btn btn-light active"  (click)="changeFilterMonth(2)"> Februarie </button>
              <button type="button" class="btn btn-light" (click)="changeFilterMonth(3)"> Martie </button>
              <button type="button" class="btn btn-light" (click)="changeFilterMonth(4)"> Aprilie </button>
              <button type="button" class="btn btn-light" (click)="changeFilterMonth(5)"> Mai </button>
              <button type="button" class="btn btn-light" (click)="changeFilterMonth(6)"> Iunie </button>
              <button type="button" class="btn btn-light" (click)="changeFilterMonth(7)"> Iulie </button>
              <button type="button" class="btn btn-light" (click)="changeFilterMonth(8)"> August </button>
              <button type="button" class="btn btn-light" (click)="changeFilterMonth(9)"> Septembrie </button>
              <button type="button" class="btn btn-light" (click)="changeFilterMonth(10)"> Octombrie </button>
              <button type="button" class="btn btn-light" (click)="changeFilterMonth(11)"> Noiembrie </button>
              <button type="button" class="btn btn-light" (click)="changeFilterMonth(12)"> Decembrie </button>
            </div>
          </div>
          <!-- List with special filters -->
          <p class="fs-5 pt-2 text-center"> Filtre speciale, ascunde clientii care contin textul: </p>
          <div>
            <div class="form-check form-switch">
              <input class="form-check-input" formControlName="hideOption1Value" type="checkbox" role="switch" id="flexSwitchCheckDefault1">
              <label class="form-check-label" for="flexSwitchCheckDefault1">
                <span> {{ filterHideOption1Text }} </span>
              </label>
            </div>
            <div class="form-check form-switch">
              <input class="form-check-input" formControlName="hideOption2Value" type="checkbox" role="switch" id="flexSwitchCheckDefault2">
              <label class="form-check-label" for="flexSwitchCheckDefault2">
                <span> {{ filterHideOption2Text }} </span>
              </label>
            </div>
          </div>
          <!-- Modal footer -->
          <div class="modal-footer border-top-0">
            <button type="submit" class="btn btn-primary" data-bs-dismiss="modal"> Save </button>
            <button type="button" class="btn btn-secondary" data-bs-dismiss="modal"> Cancel </button>
          </div>
        </form>
      </div>
    </div>
  </div>
</div>
